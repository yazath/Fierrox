<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FierroX</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{background:black;color:white;font-family:Arial}
.glass{background:rgba(255,255,255,.05);backdrop-filter:blur(15px)}
</style>
</head>
<body class="flex items-center justify-center h-screen">

<div class="glass p-10 rounded-3xl w-96 text-center space-y-4">

<h1 class="text-2xl font-bold">FierroX</h1>

<input id="email" class="w-full p-3 rounded bg-black border" placeholder="Email">
<input id="pass" type="password" class="w-full p-3 rounded bg-black border" placeholder="Password">

<button onclick="registrar()" class="w-full bg-red-600 p-3 rounded font-bold">
REGISTRARSE
</button>

<button onclick="login()" class="w-full bg-green-600 p-3 rounded font-bold">
INICIAR SESIÃ“N
</button>

<button onclick="logout()" class="w-full bg-gray-700 p-3 rounded font-bold">
CERRAR SESIÃ“N
</button>

<p id="estado" class="text-xs text-zinc-400"></p>

</div>

<script>
/* ================================
   ðŸ”´ PEGA TUS CLAVES AQUI
================================ */

const SUPABASE_URL = "https://fbeyqhwqmczselahzaer.supabase.co";
const SUPABASE_KEY = "sb_publishable_EhUhxyriBP4Wc7MiodXWVg_m8ovUtSq";

/* ================================ */

const supa = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

/* ================================
   REGISTRO
================================ */

async function registrar(){

const email = document.getElementById("email").value;
const pass = document.getElementById("pass").value;

if(!email || !pass){
alert("Ingresa datos");
return;
}

const {error} = await supa.auth.signUp({
email,
password: pass
});

if(error){
alert(error.message);
return;
}

alert("Cuenta creada correctamente");
}

/* ================================
   LOGIN
================================ */

async function login(){

const email = document.getElementById("email").value;
const pass = document.getElementById("pass").value;

const {data,error} = await supa.auth.signInWithPassword({
email,
password: pass
});

if(error){
alert(error.message);
return;
}

document.getElementById("estado").innerText =
"SesiÃ³n iniciada: " + data.user.email;
}

/* ================================
   LOGOUT
================================ */

async function logout(){
await supa.auth.signOut();
document.getElementById("estado").innerText = "SesiÃ³n cerrada";
}

/* ================================
   SESION ACTIVA AUTO
================================ */

window.onload = async () => {

const {data} = await supa.auth.getSession();

if(data.session){
document.getElementById("estado").innerText =
"SesiÃ³n activa: " + data.session.user.email;
}

};
</script>

</body>
</html>
